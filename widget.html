<div class="panel panel-primary">
    <div class="panel-heading">
      <h3 class="panel-title">${Code Search}</h3>
    </div>
    <div class="panel-body col-12">
      <form class="form-horizontal">
        <fieldset>
          <!-- Form Name -->
          <!--<legend>Form Name</legend>-->
          <div class="row">
            <div class="col-sm-8">
              <!-- Search input-->
              <div class="form-group">
                <div class="col-md-12">
                  <div class="input-group">
                    <input id="searchinput" name="searchinput" class="form-control" placeholder="GlideDateTime" type="text"
                           ng-model="term">
                    <div class="input-group-btn">
                      <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown">
                        <span data-value="" id="table" ng-bind="table"></span>
                        <span class="caret"></span>
                      </button>
                      <ul ng-if="data.tables.length>0" class="dropdown-menu pull-right">
                        <li ng-repeat="table in data.tables">
                          <button class="btn btn-link" ng-click="setUrl(table.name)">
                              {{table.calculated}}
                          </button>
                        </li>
                      </ul>
                    </div>
                  </div>
                  <!--<input id="searchinput" 
                         name="searchinput" 
                         placeholder="GlideDateTime" 
                         class="form-control input-md" 
                         type="search"
                         ng-model="term"
                         >-->
                  <p class="help-block">
                    Enter code snippet or sysid and search with appropiate button.  If you search for sysid you will initially get a bunch of "scope" messages, this is expected.
                  </p>
                </div>
              </div>
            </div>
            <div class="col-sm-4">
              <!-- Button (Double) -->
              <div class="form-group">
                <!--<label class="col-md-4 control-label" for="button1id">Double Button</label>-->
                <div class="col-md-4">
                </div>
                <div class="col-md-8">
                  <button id="button1id" 
                          name="button1id" 
                          class="btn btn-success"
                          ng-click="setUrl('code')"
                          ><i class="glyphicon glyphicon-search" aria-hidden="true"></i> Code</button>
                  <button id="button2id" 
                          name="button2id" 
                          class="btn btn-danger"
                          ng-click="setUrl('sysid')"
                          ><i class="glyphicon glyphicon-search" aria-hidden="true"></i> Sysid</button>
                </div>
              </div>
            </div>
          </div>
        </fieldset>
      </form>
  
    </div>
  </div>
  <div class="panel panel-default" ng-if="loading">
    <div class="text-center">
      <h1 ng-if="search==='code'">
        Searching code...  
      </h1>
      <h1 ng-if="search==='sysid'">
        Searching for record...  
      </h1>
      <div class="fa fa-spinner fa-spin" id="spinner"></div>
    </div>
  </div>
  <div class="panel panel-default" ng-if="results && !loading">
    <h1 class="text-center">
      <div ng-if="hits>0 && search === 'code'">
        {{hits}} Code Matches
      </div>
      <div ng-if="hits>0 && search === 'sysid'">
        Found
      </div>
      <div ng-if="hits === 0">
        No Matches Found
      </div>
    </h1>
    <div class="panel-body">
      <div ng-if="search==='sysid'" ng-repeat="hits in results">
        <div class="row container" id="{{hits.sysid}}">
          <p>
            <a href="{{hits.url}}">{{hits.displayValue}} on {{hits.table}}.</a>
          </p>
        </div>
      </div>
      <div ng-if="search!=='sysid'" ng-repeat="table in results">
        <div class="row container" ng-if="table.hits.length>0">
          <p>
            <a href="#{{table.recordType}}">{{table.recordType}} has {{table.hits.length}} matching records.</a>
          </p>
        </div>
      </div>
      <div ng-repeat="table in results">
        <div class="row" id="{{table.recordType}}" ng-if="table.hits.length>0">
          <h1 class="text-center">
            {{table.tableLabel}}
          </h1>
        </div>
        <div class="row" ng-if="table.hits.length>0">
          <div class="row container" ng-repeat="hit in table.hits">
            <div class="col-sm-2">
              <a ng-href="{{hit.className}}.do?sys_id={{hit.sysId}}" target="_blank">{{hit.name}}</a>
            </div>
            <div class="col-sm-10">
              <div ng-repeat="match in hit.matches"> 
                <pre><code class="javascript"><span ng-repeat="context in match.lineMatches"><span>Line {{context.line}}</span>: <span>{{context.context}}</span><br/></span></code></pre> 
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>